# LightRAG-only contract (нормативный документ)

Этот документ обязателен к исполнению при любой разработке в репозитории.

## 1) Scope контракта

Контракт распространяется на:

- backend API;
- frontend UI;
- docs/specs;
- CI и operational workflows.

## 2) Обязательные правила (MUST)

1. Продуктовый интеллект-контур = **только LightRAG**.
2. Новые фичи **MUST NOT** использовать `/kag/*`.
3. Frontend **MUST** использовать только:
   - `POST /lightrag/query`
   - `POST /search` (только как compatibility alias).
4. Runtime **MUST** работать с `LIGHTRAG_ONLY=1`.
5. Любой PR, который добавляет зависимость от `/kag/*`, считается нарушением контракта.

## 3) Legacy артефакты

- Наличие legacy-файлов/таблиц не означает разрешение на их использование.
- Legacy маршруты `/kag/*` считаются отключёнными и не входят в dev-contract.

## 4) Проверка соответствия

Перед merge необходимо подтвердить:

1. В UI нет вызовов `/kag/*`.
2. В docs нет формулировок, допускающих активное использование `/kag/*`.
3. API reference и runbooks соответствуют LightRAG-only.
4. `server/.env.example` содержит `LIGHTRAG_ONLY=1` как целевой режим.

## 5) Что делать при конфликте требований

Если бизнес-задача требует функциональность вне LightRAG-only контракта:

1. Оформляется отдельный RFC.
2. RFC должен явно изменить этот контракт.
3. До утверждения RFC реализация блокируется.
